<template>
  <q-page class="q-pa-md problem-explanation-page">
    <div class="row justify-center">
      <!-- ì™¼ìª½: ë¬¸ì œ ì„¤ëª… ì¹´ë“œ -->
      <div class="col-12 col-md-7">
        <q-card flat class="bg-grey-1 text-dark q-px-sm q-pb-sm">
          <!-- í—¤ë” (ë¬¸ì œ ì œëª©, ë‚œì´ë„, etc.) -->
          <q-card-section>
            <div class="text-h5">{{ problemTitle }}</div>
            <div class="text-caption text-grey">ì‚¬ìš© ëŒ€ìƒ: í•™ìŠµì</div>
            <!-- ë‚œì´ë„ ë±ƒì§€ -->
            <q-badge
              v-if="difficulty"
              :label="difficultyLabel"
              :color="difficultyColor"
              class="q-mt-sm"
            />
          </q-card-section>

          <!-- ë¬¸ì œ ëª©í‘œ / ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª… -->
          <q-separator spaced />
          <q-card-section>
            <div class="text-h5">1ï¸âƒ£ì‹¤ìŠµ ëª©í‘œğŸ¯</div>

            <div class="text-h6 q-pl-md">
              <ul>
                <li>ì‚¬ìš©ìê°€ ì…ë ¥ê°’ì´ ì‹œìŠ¤í…œ ëª…ë ¹ì–´ì— ì§ì ‘ ì‚½ì…ë˜ëŠ” ìƒí™©ì„ ì´í•´í•©ë‹ˆë‹¤.</li>
                <li>
                  <span style="color: red">{{ problemObjective }}</span> ë“±ì˜ ê¸°ë²•ì„ ì´ìš©í•´ ëª…ë ¹ì–´
                  ì£¼ì… ê³µê²©ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
                </li>
              </ul>
            </div>
            <div class="q-pt-md text-h5">2ï¸âƒ£ë¬¸ì œ ì‹œë‚˜ë¦¬ì˜¤ğŸ­</div>
            <div class="q-pa-md text-h6">
              <div>
                ë‹¹ì‹ ì€ ê´€ë¦¬ìë¡œë¶€í„° ë‚´ë¶€ ì‹œìŠ¤í…œì˜ íŒŒì¼ ë°±ì—… ì—¬ë¶€ë¥¼ í™•ì¸í•´ë‹¬ë¼ëŠ” ìš”ì²­ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.
              </div>
              <div>
                ì‚¬ì´íŠ¸ì—ëŠ” íŠ¹ì • ë””ë ‰í† ë¦¬ì— ì¡´ì¬í•˜ëŠ” íŒŒì¼ ëª©ë¡ì„ ì¶œë ¥í•´ì£¼ëŠ” í˜ì´ì§€ê°€ ìˆìŠµë‹ˆë‹¤.
                ì‚¬ìš©ìëŠ” ë‹¤ìŒ
              </div>
              <div>ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë””ë ‰í† ë¦¬ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</div>
              <div class="q-py-lg">http://[ì„œë²„]/list.php?dir=documents</div>
              <div>ì„œë²„ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</div>
              <div class="q-py-lg">ls /var/www/uploads/[ì…ë ¥ê°’]</div>
              <div>
                ê·¸ëŸ¬ë‚˜ ì…ë ¥ê°’ì— ëŒ€í•œ í•„í„°ë§ì´ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•Šì•„ ëª…ë ¹ì–´ ì£¼ì…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë¥¼
                ì´ìš©í•´ ì„œ
              </div>
              <div>ë²„ì˜ <span style="color: red">/flag.txt</span> íŒŒì¼ì„ ì½ì–´ë³´ì„¸ìš”.</div>
              <!-- <p class="text-body1">{{ problemScenario }}</p> -->
            </div>
          </q-card-section>

          <!-- ë¬¸ì œ ë‚œì´ë„ í‘œì‹œ -->
          <q-separator spaced />
          <q-card-section>
            <div class="row items-center">
              <div class="col-4 text-bold">ë¬¸ì œ ë‚œì´ë„</div>
              <div class="col">
                <span>{{ difficultyLabel }}</span>
              </div>
            </div>
          </q-card-section>

          <!-- íŒíŠ¸ ì„¹ì…˜ (í† ê¸€) -->
          <q-separator spaced />
          <q-expansion-item group="hint" icon="help_outline" label="íŒíŠ¸" expand-separator>
            <div class="q-mt-sm">
              <p>{{ hintText }}</p>
            </div>
          </q-expansion-item>

          <!-- ì •ë‹µ ì…ë ¥ / ê²°ê³¼ í™•ì¸ -->
          <q-separator spaced />
          <q-card-section>
            <h6>ë¬¸ì œ í•´ê²°(ì •ë‹µ) ì…ë ¥</h6>
            <q-input v-model="userAnswer" filled placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" class="q-my-sm" />
            <div class="colunm q-gutter-x-sm">
              <q-btn label="ì œì¶œ" color="black" @click="onSubmitAnswer" />
              <q-btn
                label="í•´ì„¤"
                color="black"
                :to="{ name: 'WargameExplanationCmdInjection' }"
              ></q-btn>
            </div>
            <div v-if="submitResult" class="q-mt-sm">
              <q-banner
                v-if="submitSuccess"
                type="positive"
                icon="check_circle"
                label="ì„±ê³µ! ë¬¸ì œë¥¼ í•´ê²°í•˜ì…¨ìŠµë‹ˆë‹¤."
              />
              <q-banner v-else type="negative" icon="warning" label="ì‹¤íŒ¨! ë‹¤ì‹œ ì‹œë„í•´ ë³´ì„¸ìš”." />
            </div>
          </q-card-section>
          <q-separator spaced />

          <q-card-section>
            <div class="text-h6">ë¬¸ì œ ê´€ë ¨ ì•¡ì…˜</div>
            <p class="text-body2 text-grey q-mt-sm">
              ì‹¤ìŠµ í™˜ê²½ì„ ìƒì„±í•˜ê³ , ë¬¸ì œë¥¼ ì§ì ‘ í’€ì–´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
          </q-card-section>
          <q-card-section>
            <!-- ì„œë²„ ìƒì„± ë²„íŠ¼ -->
            <q-btn
              label="ì„œë²„ ìƒì„±"
              color="accent"
              icon="build"
              class="full-width q-my-sm"
              @click="onCreateServer"
            />
            <div v-if="serverCreated" class="text-positive q-my-sm">
              ì„œë²„ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ì‹¤ìŠµ í™˜ê²½ìœ¼ë¡œ ì´ë™í•´ ë³´ì„¸ìš”.
            </div>
            <!-- ë¬¸ì œ ì‹œì‘ ë²„íŠ¼ë„ ê°€ëŠ¥ -->
            <q-btn
              label="ì‹¤ìŠµ ì‹œì‘"
              color="primary"
              icon="play_arrow"
              class="full-width q-my-sm"
              @click="onStartPractice"
            />
          </q-card-section>
        </q-card>
      </div>
    </div>
  </q-page>
</template>

<script setup>
import { ref, computed } from 'vue'
//import { QCard, QInput, QBtn, QBadge, QBanner, QExpansionItem } from 'quasar'

// ì˜ˆì‹œ: ë¬¸ì œ ì •ë³´
const problemTitle = ref('ëª…ë ¹ì–´ ì£¼ì…ìœ¼ë¡œ í”Œë˜ê·¸ íƒˆì·¨')
const problemObjective = ref(';, |, &&, $(...), <code>`...`</code>')
// const problemScenario = ref(
//   '',
// )
const difficulty = ref('medium') // ì˜ˆ: 'easy' / 'medium' / 'hard'
const hintText = ref('; ê¸°í˜¸ëŠ” í•œ ì¤„ì— ì—¬ëŸ¬ ëª…ë ¹ì–´ë¥¼ ìˆœì°¨ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.')

// ë‚œì´ë„ í‘œì‹œìš©
const difficultyLabel = computed(() => {
  if (difficulty.value === 'easy') return 'ì´ˆê¸‰'
  if (difficulty.value === 'hard') return 'ê³ ê¸‰'
  return 'ì¤‘ê¸‰'
})
const difficultyColor = computed(() => {
  if (difficulty.value === 'easy') return 'green'
  if (difficulty.value === 'hard') return 'red'
  return 'orange'
})

// ì •ë‹µ ì œì¶œ
const userAnswer = ref('')
const submitResult = ref(false)
const submitSuccess = ref(false)

function onSubmitAnswer() {
  // ì‹¤ì œ ì •ë‹µ ì²´í¬ ë¡œì§...
  if (userAnswer.value.trim() === '1234') {
    submitSuccess.value = true
  } else {
    submitSuccess.value = false
  }
  submitResult.value = true
}

// ì„œë²„ ìƒì„±
const serverCreated = ref(false)
function onCreateServer() {
  // ì„œë²„ ìƒì„± API í˜¸ì¶œ ë“±...
  serverCreated.value = true
}

// ì‹¤ìŠµ ì‹œì‘
function onStartPractice() {
  // í•´ë‹¹ ì‹¤ìŠµ í˜ì´ì§€(í˜¹ì€ ì„œë²„ URL)ë¡œ ì´ë™ ì²˜ë¦¬
  console.log('ì‹¤ìŠµ ì‹œì‘!')
}
</script>

<style scoped>
.problem-explanation-page {
  background-color: #f5f5f5;
  min-height: 100vh; /* í˜ì´ì§€ ì „ì²´ ë†’ì´ ì°¨ì§€ */
}

.q-card {
  border-radius: 8px;
}

.full-width {
  width: 100%;
}
</style>
